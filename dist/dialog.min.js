!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("dialog",["jquery"],e):t.Dialog=e(t.jQuery)}(this,function(t){"use strict";function e(t){return w.call(t)}function n(t){return"[object Function]"===e(t)}function o(t){return!!n(t)&&T.test(n.toString())}function r(t,e,n,o){Array.isArray(n)||(n=!1);var r;for(var i in e)if(e.hasOwnProperty(i)){if(n&&(r=n.indexOf(i),o?r===-1:r!==-1))continue;"prototype"!==i&&(t[i]=e[i])}return t}function i(){}function a(t,e,n){var o=e.prototype;return N?N(t.prototype,o):M?t.prototype=M(o):(i.prototype=o,t.prototype=new i,i.prototype=null),n&&r(t.prototype,n),t.prototype.constructor=t,t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);default:return t.apply(e,n)}}function l(t,e){var n=k?k(t,null):t.currentStyle;return{getPropertyValue:function(t){if(n)return n.getPropertyValue?n.getPropertyValue(t):(t=t.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()}),n.getAttribute?n.getAttribute(t):n[t])}}}function c(){}function u(){var e=this;e.destroyed=!1,e.node=document.createElement("div"),e.__node=t(e.node).attr("tabindex","-1").css({display:"none",position:"absolute",outline:0})}function f(t){for(var e in t)if(t.hasOwnProperty(e)&&void 0!==P[e])return e}function d(t){return 1e3*Number(t.slice(0,-1))}function p(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return d(e)+d(t[n])}))}function m(t){return t?t.split(", "):[]}function h(t){var e,n,o,r=l(t),i=m(r.getPropertyValue(L+"-delay")),a=m(r.getPropertyValue(L+"-duration")),s=p(i,a),c=m(r.getPropertyValue(H+"-delay")),u=m(r.getPropertyValue(H+"-duration")),f=p(c,u);return o=Math.max(s,f),e=o>0?s>f?L:H:null,n=e?e===L?a.length:u.length:0,{effect:e,count:n,timeout:o}}function v(t,e){if(!H&&!L)return e();var n=t[0],o=h(n),r=o.effect;if(!r)return e();var i=0,a=o.count,s=o.timeout,l=r===L?j[L]:V[H],c=function(){t.off(l,u),e()},u=function(t){t.target===n&&++i>=a&&c()};setTimeout(function(){i<a&&c()},s+1),t.on(l,u)}function _(){u.call(this)}t="default"in t?t["default"]:t;var g=Object.prototype,y=Array.prototype,b=Function.prototype,w=g.toString,x=b.toString,T="";T+=x.call(Function),T=T.replace(/([.*+?^=!:$(){}|[\]\/\\])/g,"\\$1"),T=T.replace(/Function|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),T="^"+T+"$",T=new RegExp(T);var A=t(window),E=t(document),N=Object.setPrototypeOf;o(N)||(N=!1);var M=Object.create;o(M)||(M=!1);var k=window.getComputedStyle,C=y.slice;c.prototype={on:function(t,e,n){var o=this,r=o.__events||(o.__events={});return n=arguments.length<3?o:n,(r[t]||(r[t]=[])).push({fn:e,context:n}),o},once:function(t,e,n){function o(){r.off(t,o),s(e,this,arguments)}var r=this;return r.on(t,o,n)},emit:function(t){for(var e,n,o,r=this,i=C.call(arguments,1),a=r.__events||(r.__events={}),l=a[t]||[],c=0,u=l.length;c<u;c++)n=l[c],e=s(n.fn,n.context,i),o!==!1&&(o=e);return o},off:function(t,e,n){var o=this,r=o.__events||(o.__events={}),i=arguments.length;switch(i){case 0:o.__events={};break;case 1:delete r[t];break;default:if(e){var a=r[t];if(a){n=i<3?o:n,i=a.length;for(var s=0;s<i;s++)if(evts[s].fn===e&&evts[s].fn.context===n){a.splice(s,1);break}a.length||delete r[t]}}}return o}};var z=1024,O={alloc:[],node:t('<div tabindex="0"></div>').css({position:"fixed",top:0,left:0,width:"100%",height:"100%",userSelect:"none"}),shim:t('<div tabindex="0"></div>').css({width:0,height:0,opacity:0}),zIndex:function(t){t=Math.max(0,--t),O.node.css("z-index",t)},attach:function(t){var e=t.node,n=t.className+"-backdrop";O.node.addClass(n).insertBefore(e),O.shim.insertAfter(e)},show:function(t){var e=O.alloc;e.indexOf(t)===-1&&(O.attach(t),e.push(t))},hide:function(t){O.alloc=O.alloc.filter(function(e){return t!==e});var e=O.alloc.length;0===e?(O.node.remove(),O.shim.remove()):(t=alloc[e-1],O.zIndex(t.zIndex),O.attach(t))}};u.active=null,u.zIndex=z,u.backdrop=O,E.on("focusin",function(t){var e=u.active;if(e&&e.modal){var n=t.target,o=e.node;n===o||o.contains(n)||e.focus()}}),a(u,c,{node:null,destroyed:!0,open:!1,autofocus:!0,modal:!1,innerHTML:"",className:"ui-layer",constructor:u,focus:function(){var t=this;if(t.destroyed||!t.open)return t;var e=t.node,n=t.__node,o=u.active;if(o&&o!==t&&o.blur(!1),!e.contains(t.__getActive())){var r=n.find("[autofocus]")[0];!t.__autofocus&&r?t.__autofocus=!0:r=e,t.__focus(r)}if(o!==t){var i=t.zIndex=u.zIndex++;O.zIndex(i),n.css("zIndex",i),n.addClass(t.className+"-focus"),t.emit("focus"),u.active=t}return t},blur:function(){var t=this;if(t.destroyed||!t.open)return t;var e=arguments[0],n=t.__activeElement;return e!==!1&&t.__focus(n),t.__autofocus=!1,t.__node.removeClass(t.className+"-focus"),t.emit("blur"),t},__focus:function(t){try{this.autofocus&&!/^iframe$/i.test(t.nodeName)&&t.focus()}catch(e){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,n=e&&e.activeElement||t;return n}catch(o){}}});var P=document.documentElement.style,V={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",KhtmlAnimation:"khtmlAnimationEnd"},j={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",KhtmlTransition:"khtmlTransitionEnd"},H=f(V),L=f(j),F=/\s+/;return a(_,u,{returnValue:void 0,align:"bottom left",className:"ui-dialog",constructor:_,__show:function(t){var e=this;if(e.destroyed)return e;var n=e.__node;return e.open=!0,e.anchor=t||null,e.__activeElement=e.__getActive(),e.__ready||(n.addClass(e.className).css("position",e.fixed?"fixed":"absolute"),n.appendTo(document.body),e.__ready=!0),e.__innerHTML!==e.innerHTML&&(n.html(e.innerHTML),e.__innerHTML=e.innerHTML),e.modal&&(u.backdrop.show(e),n.addClass(e.className+"-modal")),n.attr("role",e.modal?"alertdialog":"dialog").removeClass(e.className+"-close").addClass(e.className+"-show"),e.reset(),n.show(),e.emit("show"),e.focus(),e},show:function(t){var e=this;if(e.modal){var n=e.__node;e.open&&u.backdrop.hide(e),n.removeClass(e.className+"-modal")}return e.modal=!1,e.__show(t)},showModal:function(t){var e=this;e.__node;return e.modal=!0,e.__show(t)},close:function(t){var e=this;if(e.destroyed||!e.open)return e;if(e.emit("beforeclose")===!1)return e;void 0!==t&&(e.returnValue=t);var n=(e.node,e.__node);return n.removeClass(e.className+"-show").addClass(e.className+"-close"),e.blur(),v(n,function(){n.hide(),e.modal&&u.backdrop.hide(e),e.open=!1,e.emit("close")}),e},remove:function(){var t=this;if(t.destroyed)return t;if(t.emit("beforeremove")===!1)return t;u.active===t&&(u.active=null),t.open&&t.modal&&u.backdrop.hide(t),t.__node.remove(),t.destroyed=!0,t.emit("remove");for(var e in t)delete t[e];return t},reset:function(){var t=this;if(t.destroyed||!t.open)return t;var e=t.anchor;return e?t.__follow(e):t.__center(),t.emit("reset"),t},__center:function(){var t=this,e=t.__node,n=t.fixed,o=A.width(),r=A.height(),i=n?0:E.scrollLeft(),a=n?0:E.scrollTop(),s=e.outerWidth(),l=e.outerHeight(),c=382*(r-l)/1e3+a,u=(o-s)/2+i;e.css({top:Math.max(parseFloat(c),a),left:Math.max(parseFloat(u),i)})},__follow:function(e){var n=this,o=n.__node;if(n.__align&&o.removeClass(n.__align),e=e.parentNode&&t(e),!e||!e.length)return n.__center();if(e){var r=e.offset();if(r.left*r.top<0)return n.__center()}var i=n.fixed,a=A.width(),s=A.height(),l=E.scrollLeft(),c=E.scrollTop(),u=o.outerWidth(),f=o.outerHeight(),d=e?e.outerWidth():0,p=e?e.outerHeight():0,r=n.__offset(e[0]),m=r.left,h=r.top,v=i?m-l:m,_=i?h-c:h,g=i?0:c,y=i?0:l,b=g+s-f,w=y+a-u,x={},T=n.align.split(F),N=n.className+"-",M={top:"bottom",bottom:"top",left:"right",right:"left"},k={top:"top",bottom:"top",left:"left",right:"left"},C=[{top:_-f,bottom:_+p,left:v-u,right:v+d},{top:_,bottom:_-f+p,left:v,right:v-u+d}],z={top:_+p/2-f/2,left:v+d/2-u/2},O={left:[y,w],top:[g,b]};T.forEach(function(t,e){C[e][t]>O[k[t]][1]&&(t=T[e]=M[t]),C[e][t]<O[k[t]][0]&&(T[e]=M[t])}),T[1]||(k[T[1]]="left"===k[T[0]]?"top":"left",C[1][T[1]]=z[k[T[1]]]),N+=T.join("-")+" "+n.className+"-follow",n.__align=N,o.addClass(N),x[k[T[0]]]=parseFloat(C[0][T[0]]),x[k[T[1]]]=parseFloat(C[1][T[1]]),o.css(x)},__offset:function(e){var n=e.parentNode,o=n?t(e).offset():{left:e.pageX,top:e.pageY};e=n?e:e.target;var r=e.ownerDocument,i=r.defaultView||r.parentWindow;if(i==window)return o;var a=i.frameElement;r=t(r);var s=r.scrollLeft(),l=r.scrollTop(),c=t(a).offset(),u=c.left,f=c.top;return{top:o.top+f-l,left:o.left+u-s}}}),_});
//# sourceMappingURL=dialog.js.map